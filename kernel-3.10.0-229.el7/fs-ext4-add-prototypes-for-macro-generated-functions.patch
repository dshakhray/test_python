From 87ccbd94a9be5fb1f8f6e2a0afa092cd6d31b757 Mon Sep 17 00:00:00 2001
From: Lukas Czerner <lczerner@redhat.com>
Date: Thu, 23 Oct 2014 09:53:54 -0400
Subject: [fs] ext4: add prototypes for macro-generated functions

Message-id: <1414058125-4183-81-git-send-email-lczerner@redhat.com>
Patchwork-id: 98156
O-Subject: [RHEL 7.1 PATCH v2 080/171] ext4: add prototypes for macro-generated functions
Bugzilla: 1150139
RH-Acked-by: Eric Sandeen <sandeen@redhat.com>

From: Andreas Dilger <adilger@dilger.ca>

BZ 1150139
https://bugzilla.redhat.com/show_bug.cgi?id=1150139

BREW 8142710
https://brewweb.devel.redhat.com/taskinfo?taskID=8142710

Upstream commit 3f61c0cc706d5c0beee7af17ffeb706403cf513c

 It isn't very easy to find the declarations for the functions created
 by EXT4_INODE_BIT_FNS() because the names are generated by macros:

     ext4_test_inode_flag, ext4_set_inode_flag, ext4_clear_inode_flag
     ext4_test_inode_state, ext4_set_inode_state, ext4_clear_inode_state

 Add explicit declarations for these functions so that grep and tags
 can find them.

 Signed-off-by: Andreas Dilger <adilger@dilger.ca>
 Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>
 Signed-off-by: Lukas Czerner <lczerner@redhat.com>
---

Signed-off-by: Jarod Wilson <jarod@redhat.com>

diff --git a/fs/ext4/ext4.h b/fs/ext4/ext4.h
index 1f21dff..c4c7826 100644
--- a/fs/ext4/ext4.h
+++ b/fs/ext4/ext4.h
@@ -1412,7 +1412,18 @@ static inline void ext4_clear_inode_##name(struct inode *inode, int bit) \
  clear_bit(bit + (offset), &EXT4_I(inode)->i_##field);  \
 }
 
+/* Add these declarations here only so that these functions can be
+ * found by name.  Otherwise, they are very hard to locate. */
+static inline int ext4_test_inode_flag(struct inode *inode, int bit);
+static inline void ext4_set_inode_flag(struct inode *inode, int bit);
+static inline void ext4_clear_inode_flag(struct inode *inode, int bit);
 EXT4_INODE_BIT_FNS(flag, flags, 0)
+
+/* Add these declarations here only so that these functions can be
+ * found by name.  Otherwise, they are very hard to locate. */
+static inline int ext4_test_inode_state(struct inode *inode, int bit);
+static inline void ext4_set_inode_state(struct inode *inode, int bit);
+static inline void ext4_clear_inode_state(struct inode *inode, int bit);
 #if (BITS_PER_LONG < 64)
 EXT4_INODE_BIT_FNS(state, state_flags, 0)
 
-- 
1.7.1